import{_ as yt,r as X,L as wt,o as Ct,M as Et,g as bt,x as z,y as L,z as y,N as oe,O as k,P as ie,F as se,G as ue,A as S,Q as J,B as W,D as _,E as j,R as De,T as vt}from"./BQPUzQds.js";function Pt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Y={},ae,Fe;function Bt(){return Fe||(Fe=1,ae=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ae}var le={},O={},Ue;function Q(){if(Ue)return O;Ue=1;let r;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return O.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},O.getSymbolTotalCodewords=function(n){return i[n]},O.getBCHDigit=function(o){let n=0;for(;o!==0;)n++,o>>>=1;return n},O.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},O.isKanjiModeEnabled=function(){return typeof r<"u"},O.toSJIS=function(n){return r(n)},O}var de={},ke;function Ne(){return ke||(ke=1,function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+o)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,e){if(r.isValid(n))return n;try{return i(n)}catch{return e}}}(de)),de}var ce,Ve;function Tt(){if(Ve)return ce;Ve=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(i){const o=Math.floor(i/8);return(this.buffer[o]>>>7-i%8&1)===1},put:function(i,o){for(let n=0;n<o;n++)this.putBit((i>>>o-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),i&&(this.buffer[o]|=128>>>this.length%8),this.length++}},ce=r,ce}var fe,ze;function Rt(){if(ze)return fe;ze=1;function r(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}return r.prototype.set=function(i,o,n,e){const t=i*this.size+o;this.data[t]=n,e&&(this.reservedBit[t]=!0)},r.prototype.get=function(i,o){return this.data[i*this.size+o]},r.prototype.xor=function(i,o,n){this.data[i*this.size+o]^=n},r.prototype.isReserved=function(i,o){return this.reservedBit[i*this.size+o]},fe=r,fe}var ge={},Oe;function At(){return Oe||(Oe=1,function(r){const i=Q().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const e=Math.floor(n/7)+2,t=i(n),s=t===145?26:Math.ceil((t-13)/(2*e-2))*2,u=[t-7];for(let a=1;a<e-1;a++)u[a]=u[a-1]-s;return u.push(6),u.reverse()},r.getPositions=function(n){const e=[],t=r.getRowColCoords(n),s=t.length;for(let u=0;u<s;u++)for(let a=0;a<s;a++)u===0&&a===0||u===0&&a===s-1||u===s-1&&a===0||e.push([t[u],t[a]]);return e}}(ge)),ge}var he={},Qe;function qt(){if(Qe)return he;Qe=1;const r=Q().getSymbolSize,i=7;return he.getPositions=function(n){const e=r(n);return[[0,0],[e-i,0],[0,e-i]]},he}var me={},Ke;function Mt(){return Ke||(Ke=1,function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const i={N1:3,N2:3,N3:40,N4:10};r.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7},r.from=function(e){return r.isValid(e)?parseInt(e,10):void 0},r.getPenaltyN1=function(e){const t=e.size;let s=0,u=0,a=0,f=null,m=null;for(let d=0;d<t;d++){u=a=0,f=m=null;for(let w=0;w<t;w++){let h=e.get(d,w);h===f?u++:(u>=5&&(s+=i.N1+(u-5)),f=h,u=1),h=e.get(w,d),h===m?a++:(a>=5&&(s+=i.N1+(a-5)),m=h,a=1)}u>=5&&(s+=i.N1+(u-5)),a>=5&&(s+=i.N1+(a-5))}return s},r.getPenaltyN2=function(e){const t=e.size;let s=0;for(let u=0;u<t-1;u++)for(let a=0;a<t-1;a++){const f=e.get(u,a)+e.get(u,a+1)+e.get(u+1,a)+e.get(u+1,a+1);(f===4||f===0)&&s++}return s*i.N2},r.getPenaltyN3=function(e){const t=e.size;let s=0,u=0,a=0;for(let f=0;f<t;f++){u=a=0;for(let m=0;m<t;m++)u=u<<1&2047|e.get(f,m),m>=10&&(u===1488||u===93)&&s++,a=a<<1&2047|e.get(m,f),m>=10&&(a===1488||a===93)&&s++}return s*i.N3},r.getPenaltyN4=function(e){let t=0;const s=e.data.length;for(let a=0;a<s;a++)t+=e.data[a];return Math.abs(Math.ceil(t*100/s/5)-10)*i.N4};function o(n,e,t){switch(n){case r.Patterns.PATTERN000:return(e+t)%2===0;case r.Patterns.PATTERN001:return e%2===0;case r.Patterns.PATTERN010:return t%3===0;case r.Patterns.PATTERN011:return(e+t)%3===0;case r.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case r.Patterns.PATTERN101:return e*t%2+e*t%3===0;case r.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case r.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(e,t){const s=t.size;for(let u=0;u<s;u++)for(let a=0;a<s;a++)t.isReserved(a,u)||t.xor(a,u,o(e,a,u))},r.getBestMask=function(e,t){const s=Object.keys(r.Patterns).length;let u=0,a=1/0;for(let f=0;f<s;f++){t(f),r.applyMask(f,e);const m=r.getPenaltyN1(e)+r.getPenaltyN2(e)+r.getPenaltyN3(e)+r.getPenaltyN4(e);r.applyMask(f,e),m<a&&(a=m,u=f)}return u}}(me)),me}var Z={},He;function dt(){if(He)return Z;He=1;const r=Ne(),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Z.getBlocksCount=function(e,t){switch(t){case r.L:return i[(e-1)*4+0];case r.M:return i[(e-1)*4+1];case r.Q:return i[(e-1)*4+2];case r.H:return i[(e-1)*4+3];default:return}},Z.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return o[(e-1)*4+0];case r.M:return o[(e-1)*4+1];case r.Q:return o[(e-1)*4+2];case r.H:return o[(e-1)*4+3];default:return}},Z}var pe={},$={},Je;function It(){if(Je)return $;Je=1;const r=new Uint8Array(512),i=new Uint8Array(256);return function(){let n=1;for(let e=0;e<255;e++)r[e]=n,i[n]=e,n<<=1,n&256&&(n^=285);for(let e=255;e<512;e++)r[e]=r[e-255]}(),$.log=function(n){if(n<1)throw new Error("log("+n+")");return i[n]},$.exp=function(n){return r[n]},$.mul=function(n,e){return n===0||e===0?0:r[i[n]+i[e]]},$}var je;function Nt(){return je||(je=1,function(r){const i=It();r.mul=function(n,e){const t=new Uint8Array(n.length+e.length-1);for(let s=0;s<n.length;s++)for(let u=0;u<e.length;u++)t[s+u]^=i.mul(n[s],e[u]);return t},r.mod=function(n,e){let t=new Uint8Array(n);for(;t.length-e.length>=0;){const s=t[0];for(let a=0;a<e.length;a++)t[a]^=i.mul(e[a],s);let u=0;for(;u<t.length&&t[u]===0;)u++;t=t.slice(u)}return t},r.generateECPolynomial=function(n){let e=new Uint8Array([1]);for(let t=0;t<n;t++)e=r.mul(e,new Uint8Array([1,i.exp(t)]));return e}}(pe)),pe}var ye,Ye;function St(){if(Ye)return ye;Ye=1;const r=Nt();function i(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}return i.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(n.length+this.degree);e.set(n);const t=r.mod(e,this.genPoly),s=this.degree-t.length;if(s>0){const u=new Uint8Array(this.degree);return u.set(t,s),u}return t},ye=i,ye}var we={},Ce={},Ee={},Ge;function ct(){return Ge||(Ge=1,Ee.isValid=function(i){return!isNaN(i)&&i>=1&&i<=40}),Ee}var D={},$e;function ft(){if($e)return D;$e=1;const r="[0-9]+",i="[A-Z $%*+\\-./:]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+`)(?:.|[\r
]))+`;D.KANJI=new RegExp(o,"g"),D.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),D.BYTE=new RegExp(n,"g"),D.NUMERIC=new RegExp(r,"g"),D.ALPHANUMERIC=new RegExp(i,"g");const e=new RegExp("^"+o+"$"),t=new RegExp("^"+r+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return D.testKanji=function(a){return e.test(a)},D.testNumeric=function(a){return t.test(a)},D.testAlphanumeric=function(a){return s.test(a)},D}var xe;function K(){return xe||(xe=1,function(r){const i=ct(),o=ft();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(t,s){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!i.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?t.ccBits[0]:s<27?t.ccBits[1]:t.ccBits[2]},r.getBestModeForData=function(t){return o.testNumeric(t)?r.NUMERIC:o.testAlphanumeric(t)?r.ALPHANUMERIC:o.testKanji(t)?r.KANJI:r.BYTE},r.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},r.isValid=function(t){return t&&t.bit&&t.ccBits};function n(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+e)}}r.from=function(t,s){if(r.isValid(t))return t;try{return n(t)}catch{return s}}}(Ce)),Ce}var Xe;function Lt(){return Xe||(Xe=1,function(r){const i=Q(),o=dt(),n=Ne(),e=K(),t=ct(),s=7973,u=i.getBCHDigit(s);function a(w,h,R){for(let q=1;q<=40;q++)if(h<=r.getCapacity(q,R,w))return q}function f(w,h){return e.getCharCountIndicator(w,h)+4}function m(w,h){let R=0;return w.forEach(function(q){const N=f(q.mode,h);R+=N+q.getBitsLength()}),R}function d(w,h){for(let R=1;R<=40;R++)if(m(w,R)<=r.getCapacity(R,h,e.MIXED))return R}r.from=function(h,R){return t.isValid(h)?parseInt(h,10):R},r.getCapacity=function(h,R,q){if(!t.isValid(h))throw new Error("Invalid QR Code version");typeof q>"u"&&(q=e.BYTE);const N=i.getSymbolTotalCodewords(h),B=o.getTotalCodewordsCount(h,R),M=(N-B)*8;if(q===e.MIXED)return M;const g=M-f(q,h);switch(q){case e.NUMERIC:return Math.floor(g/10*3);case e.ALPHANUMERIC:return Math.floor(g/11*2);case e.KANJI:return Math.floor(g/13);case e.BYTE:default:return Math.floor(g/8)}},r.getBestVersionForData=function(h,R){let q;const N=n.from(R,n.M);if(Array.isArray(h)){if(h.length>1)return d(h,N);if(h.length===0)return 1;q=h[0]}else q=h;return a(q.mode,q.getLength(),N)},r.getEncodedBits=function(h){if(!t.isValid(h)||h<7)throw new Error("Invalid QR Code version");let R=h<<12;for(;i.getBCHDigit(R)-u>=0;)R^=s<<i.getBCHDigit(R)-u;return h<<12|R}}(we)),we}var be={},We;function _t(){if(We)return be;We=1;const r=Q(),i=1335,o=21522,n=r.getBCHDigit(i);return be.getEncodedBits=function(t,s){const u=t.bit<<3|s;let a=u<<10;for(;r.getBCHDigit(a)-n>=0;)a^=i<<r.getBCHDigit(a)-n;return(u<<10|a)^o},be}var ve={},Pe,Ze;function Dt(){if(Ze)return Pe;Ze=1;const r=K();function i(o){this.mode=r.NUMERIC,this.data=o.toString()}return i.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(n){let e,t,s;for(e=0;e+3<=this.data.length;e+=3)t=this.data.substr(e,3),s=parseInt(t,10),n.put(s,10);const u=this.data.length-e;u>0&&(t=this.data.substr(e),s=parseInt(t,10),n.put(s,u*3+1))},Pe=i,Pe}var Be,et;function Ft(){if(et)return Be;et=1;const r=K(),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(n){this.mode=r.ALPHANUMERIC,this.data=n}return o.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let s=i.indexOf(this.data[t])*45;s+=i.indexOf(this.data[t+1]),e.put(s,11)}this.data.length%2&&e.put(i.indexOf(this.data[t]),6)},Be=o,Be}var Te,tt;function Ut(){if(tt)return Te;tt=1;const r=K();function i(o){this.mode=r.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}return i.getBitsLength=function(n){return n*8},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(o){for(let n=0,e=this.data.length;n<e;n++)o.put(this.data[n],8)},Te=i,Te}var Re,nt;function kt(){if(nt)return Re;nt=1;const r=K(),i=Q();function o(n){this.mode=r.KANJI,this.data=n}return o.getBitsLength=function(e){return e*13},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=i.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}},Re=o,Re}var Ae={exports:{}},rt;function Vt(){return rt||(rt=1,function(r){var i={single_source_shortest_paths:function(o,n,e){var t={},s={};s[n]=0;var u=i.PriorityQueue.make();u.push(n,0);for(var a,f,m,d,w,h,R,q,N;!u.empty();){a=u.pop(),f=a.value,d=a.cost,w=o[f]||{};for(m in w)w.hasOwnProperty(m)&&(h=w[m],R=d+h,q=s[m],N=typeof s[m]>"u",(N||q>R)&&(s[m]=R,u.push(m,R),t[m]=f))}if(typeof e<"u"&&typeof s[e]>"u"){var B=["Could not find a path from ",n," to ",e,"."].join("");throw new Error(B)}return t},extract_shortest_path_from_predecessor_list:function(o,n){for(var e=[],t=n;t;)e.push(t),o[t],t=o[t];return e.reverse(),e},find_path:function(o,n,e){var t=i.single_source_shortest_paths(o,n,e);return i.extract_shortest_path_from_predecessor_list(t,e)},PriorityQueue:{make:function(o){var n=i.PriorityQueue,e={},t;o=o||{};for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.queue=[],e.sorter=o.sorter||n.default_sorter,e},default_sorter:function(o,n){return o.cost-n.cost},push:function(o,n){var e={value:o,cost:n};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=i}(Ae)),Ae.exports}var ot;function zt(){return ot||(ot=1,function(r){const i=K(),o=Dt(),n=Ft(),e=Ut(),t=kt(),s=ft(),u=Q(),a=Vt();function f(B){return unescape(encodeURIComponent(B)).length}function m(B,M,g){const l=[];let I;for(;(I=B.exec(g))!==null;)l.push({data:I[0],index:I.index,mode:M,length:I[0].length});return l}function d(B){const M=m(s.NUMERIC,i.NUMERIC,B),g=m(s.ALPHANUMERIC,i.ALPHANUMERIC,B);let l,I;return u.isKanjiModeEnabled()?(l=m(s.BYTE,i.BYTE,B),I=m(s.KANJI,i.KANJI,B)):(l=m(s.BYTE_KANJI,i.BYTE,B),I=[]),M.concat(g,l,I).sort(function(v,b){return v.index-b.index}).map(function(v){return{data:v.data,mode:v.mode,length:v.length}})}function w(B,M){switch(M){case i.NUMERIC:return o.getBitsLength(B);case i.ALPHANUMERIC:return n.getBitsLength(B);case i.KANJI:return t.getBitsLength(B);case i.BYTE:return e.getBitsLength(B)}}function h(B){return B.reduce(function(M,g){const l=M.length-1>=0?M[M.length-1]:null;return l&&l.mode===g.mode?(M[M.length-1].data+=g.data,M):(M.push(g),M)},[])}function R(B){const M=[];for(let g=0;g<B.length;g++){const l=B[g];switch(l.mode){case i.NUMERIC:M.push([l,{data:l.data,mode:i.ALPHANUMERIC,length:l.length},{data:l.data,mode:i.BYTE,length:l.length}]);break;case i.ALPHANUMERIC:M.push([l,{data:l.data,mode:i.BYTE,length:l.length}]);break;case i.KANJI:M.push([l,{data:l.data,mode:i.BYTE,length:f(l.data)}]);break;case i.BYTE:M.push([{data:l.data,mode:i.BYTE,length:f(l.data)}])}}return M}function q(B,M){const g={},l={start:{}};let I=["start"];for(let c=0;c<B.length;c++){const v=B[c],b=[];for(let p=0;p<v.length;p++){const T=v[p],C=""+c+p;b.push(C),g[C]={node:T,lastCount:0},l[C]={};for(let P=0;P<I.length;P++){const E=I[P];g[E]&&g[E].node.mode===T.mode?(l[E][C]=w(g[E].lastCount+T.length,T.mode)-w(g[E].lastCount,T.mode),g[E].lastCount+=T.length):(g[E]&&(g[E].lastCount=T.length),l[E][C]=w(T.length,T.mode)+4+i.getCharCountIndicator(T.mode,M))}}I=b}for(let c=0;c<I.length;c++)l[I[c]].end=0;return{map:l,table:g}}function N(B,M){let g;const l=i.getBestModeForData(B);if(g=i.from(M,l),g!==i.BYTE&&g.bit<l.bit)throw new Error('"'+B+'" cannot be encoded with mode '+i.toString(g)+`.
 Suggested mode is: `+i.toString(l));switch(g===i.KANJI&&!u.isKanjiModeEnabled()&&(g=i.BYTE),g){case i.NUMERIC:return new o(B);case i.ALPHANUMERIC:return new n(B);case i.KANJI:return new t(B);case i.BYTE:return new e(B)}}r.fromArray=function(M){return M.reduce(function(g,l){return typeof l=="string"?g.push(N(l,null)):l.data&&g.push(N(l.data,l.mode)),g},[])},r.fromString=function(M,g){const l=d(M,u.isKanjiModeEnabled()),I=R(l),c=q(I,g),v=a.find_path(c.map,"start","end"),b=[];for(let p=1;p<v.length-1;p++)b.push(c.table[v[p]].node);return r.fromArray(h(b))},r.rawSplit=function(M){return r.fromArray(d(M,u.isKanjiModeEnabled()))}}(ve)),ve}var it;function Ot(){if(it)return le;it=1;const r=Q(),i=Ne(),o=Tt(),n=Rt(),e=At(),t=qt(),s=Mt(),u=dt(),a=St(),f=Lt(),m=_t(),d=K(),w=zt();function h(c,v){const b=c.size,p=t.getPositions(v);for(let T=0;T<p.length;T++){const C=p[T][0],P=p[T][1];for(let E=-1;E<=7;E++)if(!(C+E<=-1||b<=C+E))for(let A=-1;A<=7;A++)P+A<=-1||b<=P+A||(E>=0&&E<=6&&(A===0||A===6)||A>=0&&A<=6&&(E===0||E===6)||E>=2&&E<=4&&A>=2&&A<=4?c.set(C+E,P+A,!0,!0):c.set(C+E,P+A,!1,!0))}}function R(c){const v=c.size;for(let b=8;b<v-8;b++){const p=b%2===0;c.set(b,6,p,!0),c.set(6,b,p,!0)}}function q(c,v){const b=e.getPositions(v);for(let p=0;p<b.length;p++){const T=b[p][0],C=b[p][1];for(let P=-2;P<=2;P++)for(let E=-2;E<=2;E++)P===-2||P===2||E===-2||E===2||P===0&&E===0?c.set(T+P,C+E,!0,!0):c.set(T+P,C+E,!1,!0)}}function N(c,v){const b=c.size,p=f.getEncodedBits(v);let T,C,P;for(let E=0;E<18;E++)T=Math.floor(E/3),C=E%3+b-8-3,P=(p>>E&1)===1,c.set(T,C,P,!0),c.set(C,T,P,!0)}function B(c,v,b){const p=c.size,T=m.getEncodedBits(v,b);let C,P;for(C=0;C<15;C++)P=(T>>C&1)===1,C<6?c.set(C,8,P,!0):C<8?c.set(C+1,8,P,!0):c.set(p-15+C,8,P,!0),C<8?c.set(8,p-C-1,P,!0):C<9?c.set(8,15-C-1+1,P,!0):c.set(8,15-C-1,P,!0);c.set(p-8,8,1,!0)}function M(c,v){const b=c.size;let p=-1,T=b-1,C=7,P=0;for(let E=b-1;E>0;E-=2)for(E===6&&E--;;){for(let A=0;A<2;A++)if(!c.isReserved(T,E-A)){let V=!1;P<v.length&&(V=(v[P]>>>C&1)===1),c.set(T,E-A,V),C--,C===-1&&(P++,C=7)}if(T+=p,T<0||b<=T){T-=p,p=-p;break}}}function g(c,v,b){const p=new o;b.forEach(function(A){p.put(A.mode.bit,4),p.put(A.getLength(),d.getCharCountIndicator(A.mode,c)),A.write(p)});const T=r.getSymbolTotalCodewords(c),C=u.getTotalCodewordsCount(c,v),P=(T-C)*8;for(p.getLengthInBits()+4<=P&&p.put(0,4);p.getLengthInBits()%8!==0;)p.putBit(0);const E=(P-p.getLengthInBits())/8;for(let A=0;A<E;A++)p.put(A%2?17:236,8);return l(p,c,v)}function l(c,v,b){const p=r.getSymbolTotalCodewords(v),T=u.getTotalCodewordsCount(v,b),C=p-T,P=u.getBlocksCount(v,b),E=p%P,A=P-E,V=Math.floor(p/P),G=Math.floor(C/P),ht=G+1,Se=V-G,mt=new a(Se);let ee=0;const x=new Array(P),Le=new Array(P);let te=0;const pt=new Uint8Array(c.buffer);for(let H=0;H<P;H++){const re=H<A?G:ht;x[H]=pt.slice(ee,ee+re),Le[H]=mt.encode(x[H]),ee+=re,te=Math.max(te,re)}const ne=new Uint8Array(p);let _e=0,F,U;for(F=0;F<te;F++)for(U=0;U<P;U++)F<x[U].length&&(ne[_e++]=x[U][F]);for(F=0;F<Se;F++)for(U=0;U<P;U++)ne[_e++]=Le[U][F];return ne}function I(c,v,b,p){let T;if(Array.isArray(c))T=w.fromArray(c);else if(typeof c=="string"){let V=v;if(!V){const G=w.rawSplit(c);V=f.getBestVersionForData(G,b)}T=w.fromString(c,V||40)}else throw new Error("Invalid data");const C=f.getBestVersionForData(T,b);if(!C)throw new Error("The amount of data is too big to be stored in a QR Code");if(!v)v=C;else if(v<C)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+C+`.
`);const P=g(v,b,T),E=r.getSymbolSize(v),A=new n(E);return h(A,v),R(A),q(A,v),B(A,b,0),v>=7&&N(A,v),M(A,P),isNaN(p)&&(p=s.getBestMask(A,B.bind(null,A,b))),s.applyMask(p,A),B(A,b,p),{modules:A,version:v,errorCorrectionLevel:b,maskPattern:p,segments:T}}return le.create=function(v,b){if(typeof v>"u"||v==="")throw new Error("No input text");let p=i.M,T,C;return typeof b<"u"&&(p=i.from(b.errorCorrectionLevel,i.M),T=f.from(b.version),C=s.from(b.maskPattern),b.toSJISFunc&&r.setToSJISFunction(b.toSJISFunc)),I(v,T,p,C)},le}var qe={},Me={},st;function gt(){return st||(st=1,function(r){function i(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let n=o.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+o);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(t){return[t,t]}))),n.length===6&&n.push("F","F");const e=parseInt(n.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const e=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,t=n.width&&n.width>=21?n.width:void 0,s=n.scale||4;return{width:t,scale:t?4:s,margin:e,color:{dark:i(n.color.dark||"#000000ff"),light:i(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,e){return e.width&&e.width>=n+e.margin*2?e.width/(n+e.margin*2):e.scale},r.getImageWidth=function(n,e){const t=r.getScale(n,e);return Math.floor((n+e.margin*2)*t)},r.qrToImageData=function(n,e,t){const s=e.modules.size,u=e.modules.data,a=r.getScale(s,t),f=Math.floor((s+t.margin*2)*a),m=t.margin*a,d=[t.color.light,t.color.dark];for(let w=0;w<f;w++)for(let h=0;h<f;h++){let R=(w*f+h)*4,q=t.color.light;if(w>=m&&h>=m&&w<f-m&&h<f-m){const N=Math.floor((w-m)/a),B=Math.floor((h-m)/a);q=d[u[N*s+B]?1:0]}n[R++]=q.r,n[R++]=q.g,n[R++]=q.b,n[R]=q.a}}}(Me)),Me}var ut;function Qt(){return ut||(ut=1,function(r){const i=gt();function o(e,t,s){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=s,t.width=s,t.style.height=s+"px",t.style.width=s+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(t,s,u){let a=u,f=s;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),s||(f=n()),a=i.getOptions(a);const m=i.getImageWidth(t.modules.size,a),d=f.getContext("2d"),w=d.createImageData(m,m);return i.qrToImageData(w.data,t,a),o(d,f,m),d.putImageData(w,0,0),f},r.renderToDataURL=function(t,s,u){let a=u;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),a||(a={});const f=r.render(t,s,a),m=a.type||"image/png",d=a.rendererOpts||{};return f.toDataURL(m,d.quality)}}(qe)),qe}var Ie={},at;function Kt(){if(at)return Ie;at=1;const r=gt();function i(e,t){const s=e.a/255,u=t+'="'+e.hex+'"';return s<1?u+" "+t+'-opacity="'+s.toFixed(2).slice(1)+'"':u}function o(e,t,s){let u=e+t;return typeof s<"u"&&(u+=" "+s),u}function n(e,t,s){let u="",a=0,f=!1,m=0;for(let d=0;d<e.length;d++){const w=Math.floor(d%t),h=Math.floor(d/t);!w&&!f&&(f=!0),e[d]?(m++,d>0&&w>0&&e[d-1]||(u+=f?o("M",w+s,.5+h+s):o("m",a,0),a=0,f=!1),w+1<t&&e[d+1]||(u+=o("h",m),m=0)):a++}return u}return Ie.render=function(t,s,u){const a=r.getOptions(s),f=t.modules.size,m=t.modules.data,d=f+a.margin*2,w=a.color.light.a?"<path "+i(a.color.light,"fill")+' d="M0 0h'+d+"v"+d+'H0z"/>':"",h="<path "+i(a.color.dark,"stroke")+' d="'+n(m,f,a.margin)+'"/>',R='viewBox="0 0 '+d+" "+d+'"',N='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+R+' shape-rendering="crispEdges">'+w+h+`</svg>
`;return typeof u=="function"&&u(null,N),N},Ie}var lt;function Ht(){if(lt)return Y;lt=1;const r=Bt(),i=Ot(),o=Qt(),n=Kt();function e(t,s,u,a,f){const m=[].slice.call(arguments,1),d=m.length,w=typeof m[d-1]=="function";if(!w&&!r())throw new Error("Callback required as last argument");if(w){if(d<2)throw new Error("Too few arguments provided");d===2?(f=u,u=s,s=a=void 0):d===3&&(s.getContext&&typeof f>"u"?(f=a,a=void 0):(f=a,a=u,u=s,s=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(u=s,s=a=void 0):d===2&&!s.getContext&&(a=u,u=s,s=void 0),new Promise(function(h,R){try{const q=i.create(u,a);h(t(q,s,a))}catch(q){R(q)}})}try{const h=i.create(u,a);f(null,t(h,s,a))}catch(h){f(h)}}return Y.create=i.create,Y.toCanvas=e.bind(null,o.render),Y.toDataURL=e.bind(null,o.renderToDataURL),Y.toString=e.bind(null,function(t,s,u){return n.render(t,u)}),Y}var Jt=Ht();const jt=Pt(Jt),Yt={class:"qr-form"},Gt={class:"form-group"},$t=["value"],xt={class:"form-group"},Xt={class:"form-group"},Wt={class:"form-group"},Zt={class:"form-group"},en={class:"input-group"},tn=["value"],nn={class:"form-group"},rn={class:"form-group"},on=["value"],sn={class:"form-help"},un={class:"form-group"},an={class:"form-actions"},ln=["disabled"],dn=["disabled"],cn={key:1,class:"loading-spinner"},fn={class:"modal-header"},gn={class:"modal-body"},hn={class:"qr-display"},mn=["src"],pn={class:"product-info"},yn={class:"info-item"},wn={class:"info-item"},Cn={class:"info-item"},En={class:"info-item"},bn={class:"info-item"},vn={class:"modal-actions"},Pn=["disabled"],Bn={key:1,class:"loading-spinner"},Tn={__name:"QrForm",props:{editMode:{type:Boolean,default:!1},qrCodeToEdit:{type:Object,default:null}},emits:["qr-created","qr-updated"],setup(r,{emit:i}){const o=r,n=i,e=X(!1),t=X(!1),s=X(!1),u=X(""),a=[{label:"Agriculture",value:"Agriculture"},{label:"Pisciculture",value:"Pisciculture"},{label:"Légumes",value:"Légumes"},{label:"Fruits",value:"Fruits"},{label:"Céréales",value:"Céréales"},{label:"Élevage",value:"Élevage"},{label:"Produits laitiers",value:"Produits laitiers"},{label:"Épices & Condiments",value:"Épices & Condiments"}],f=[{label:"g",value:"g"},{label:"kg",value:"kg"}],m=[{label:"Données brutes (URL)",value:"raw"},{label:"Page de résultat (URL)",value:"result"}],d=wt({typeProduit:"",nomProduit:"",franchise:"",prixVente:"",poids:"",unitePoids:"g",fournisseur:"PROXI NOVA",auteur:"",qrType:"raw"}),w=()=>{if(console.log("Initializing edit mode:",o.editMode,o.qrCodeToEdit),o.editMode&&o.qrCodeToEdit){const g={typeProduit:o.qrCodeToEdit.typeProduit,nomProduit:o.qrCodeToEdit.nomProduit,franchise:o.qrCodeToEdit.franchise,prixVente:o.qrCodeToEdit.prixVente.toString(),poids:o.qrCodeToEdit.poids.toString(),unitePoids:o.qrCodeToEdit.unitePoids,fournisseur:o.qrCodeToEdit.fournisseur,auteur:o.qrCodeToEdit.user?.nom||"Utilisateur",qrType:o.qrCodeToEdit.qrType||"raw"};console.log("Setting form data:",g),Object.assign(d,g)}};Ct(()=>{w()}),Et(()=>[o.editMode,o.qrCodeToEdit],g=>{console.log("Props changed:",g),o.editMode&&o.qrCodeToEdit&&w()},{immediate:!0});const h=()=>{e.value=!1},R=()=>{Object.assign(d,{typeProduit:"",nomProduit:"",franchise:"",prixVente:"",poids:"",unitePoids:"g",fournisseur:"PROXI NOVA",auteur:"",qrType:"raw"})},q=async()=>{try{t.value=!0;const g={type:d.typeProduit,produit:d.nomProduit,franchise:d.franchise,prix:`${d.prixVente} FCFA`,poids:`${d.poids} ${d.unitePoids}`,fournisseur:d.fournisseur,auteur:d.auteur,date:new Date().toLocaleDateString("fr-FR")},l=window.location.origin;let I;d.qrType==="raw"?I=JSON.stringify(g):I=`${l}/resultat?data=${encodeURIComponent(JSON.stringify(g))}`,u.value=await jt.toDataURL(I,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}),e.value=!0}catch(g){console.error("Erreur génération QR:",g),alert("Impossible de générer le QR code")}finally{t.value=!1}},N=()=>{const g=document.createElement("a");g.href=u.value,g.download=`qr-${d.nomProduit||"code"}.png`,g.click()},B=async()=>{try{s.value=!0;const g={typeProduit:d.typeProduit,nomProduit:d.nomProduit,franchise:d.franchise,prixVente:parseInt(d.prixVente),poids:parseFloat(d.poids),unitePoids:d.unitePoids,fournisseur:d.fournisseur,auteur:d.auteur,codePng:u.value,qrType:d.qrType};let l;o.editMode&&o.qrCodeToEdit?(l=await $fetch(`/api/qrcodes?id=${o.qrCodeToEdit.id}`,{method:"PUT",body:g}),n("qr-updated",l.data)):(l=await $fetch("/api/qrcodes",{method:"POST",body:g}),n("qr-created",l.data)),e.value=!1,R(),alert(o.editMode?"QR Code modifié avec succès !":"QR Code sauvegardé avec succès !")}catch(g){console.error("Erreur sauvegarde:",g),alert("Impossible de sauvegarder le QR code")}finally{s.value=!1}},M=()=>d.qrType==="raw"?"Affiche les données brutes (URL) directement sur le QR Code.":"Affiche une page de résultat qui contient les données du QR Code.";return(g,l)=>{const I=bt("FontAwesomeIcon");return L(),z("div",Yt,[y("form",{onSubmit:De(q,["prevent"]),class:"form"},[y("div",Gt,[l[12]||(l[12]=y("label",{class:"form-label required"},"Type de produit",-1)),k(y("select",{"onUpdate:modelValue":l[0]||(l[0]=c=>d.typeProduit=c),class:"form-select",required:""},[l[11]||(l[11]=y("option",{value:""},"Sélectionnez un type",-1)),(L(),z(se,null,ue(a,c=>y("option",{key:c.value,value:c.value},S(c.label),9,$t)),64))],512),[[ie,d.typeProduit]])]),y("div",xt,[l[13]||(l[13]=y("label",{class:"form-label required"},"Nom du produit",-1)),k(y("input",{"onUpdate:modelValue":l[1]||(l[1]=c=>d.nomProduit=c),type:"text",class:"form-input",placeholder:"Ex: Banane",required:""},null,512),[[J,d.nomProduit]])]),y("div",Xt,[l[14]||(l[14]=y("label",{class:"form-label required"},"Nom de la franchise",-1)),k(y("input",{"onUpdate:modelValue":l[2]||(l[2]=c=>d.franchise=c),type:"text",class:"form-input",placeholder:"Ex: PRIX IMPORT, Carrefour...",required:""},null,512),[[J,d.franchise]])]),y("div",Wt,[l[15]||(l[15]=y("label",{class:"form-label required"},"Prix de vente (FCFA)",-1)),k(y("input",{"onUpdate:modelValue":l[3]||(l[3]=c=>d.prixVente=c),type:"number",class:"form-input",placeholder:"Ex: 125000",required:""},null,512),[[J,d.prixVente]])]),y("div",Zt,[l[16]||(l[16]=y("label",{class:"form-label required"},"Poids",-1)),y("div",en,[k(y("input",{"onUpdate:modelValue":l[4]||(l[4]=c=>d.poids=c),type:"number",step:"0.01",class:"form-input",placeholder:"Ex: 1.5",required:""},null,512),[[J,d.poids]]),k(y("select",{"onUpdate:modelValue":l[5]||(l[5]=c=>d.unitePoids=c),class:"form-select form-select--small"},[(L(),z(se,null,ue(f,c=>y("option",{key:c.value,value:c.value},S(c.label),9,tn)),64))],512),[[ie,d.unitePoids]])])]),y("div",nn,[l[17]||(l[17]=y("label",{class:"form-label"},"Nom du fournisseur",-1)),k(y("input",{"onUpdate:modelValue":l[6]||(l[6]=c=>d.fournisseur=c),type:"text",class:"form-input"},null,512),[[J,d.fournisseur]])]),y("div",rn,[l[19]||(l[19]=y("label",{class:"form-label required"},"Type de QR Code",-1)),k(y("select",{"onUpdate:modelValue":l[7]||(l[7]=c=>d.qrType=c),class:"form-select",required:""},[l[18]||(l[18]=y("option",{value:""},"Sélectionnez un type",-1)),(L(),z(se,null,ue(m,c=>y("option",{key:c.value,value:c.value},S(c.label),9,on)),64))],512),[[ie,d.qrType]]),y("p",sn,[W(I,{icon:["fas","info-circle"]}),_(" "+S(M()),1)])]),y("div",un,[l[20]||(l[20]=y("label",{class:"form-label required"},"Votre nom",-1)),k(y("input",{"onUpdate:modelValue":l[8]||(l[8]=c=>d.auteur=c),type:"text",class:"form-input",placeholder:"Ex: Jean Dupont",required:""},null,512),[[J,d.auteur]])]),y("div",an,[y("button",{type:"button",class:"btn btn--secondary",onClick:R,disabled:t.value},[W(I,{icon:"fa-refresh",class:"btn-icon"}),l[21]||(l[21]=_(" Réinitialiser ",-1))],8,ln),y("button",{type:"submit",class:"btn btn--primary",disabled:t.value},[t.value?j("",!0):(L(),oe(I,{key:0,icon:"fa-qrcode",class:"btn-icon"})),t.value?(L(),z("div",cn)):j("",!0),_(" "+S(t.value?"Génération...":o.editMode?"Sauvegarder":"Générer QR Code"),1)],8,dn)])],32),(L(),oe(vt,{to:"body"},[e.value?(L(),z("div",{key:0,class:"modal-overlay",onClick:h},[y("div",{class:"modal",onClick:l[10]||(l[10]=De(()=>{},["stop"]))},[y("div",fn,[l[22]||(l[22]=y("h3",{class:"modal-title"},"Aperçu du QR Code",-1)),y("button",{class:"btn btn--ghost btn--small",onClick:l[9]||(l[9]=c=>e.value=!1)},[W(I,{icon:"fa-times"})])]),y("div",gn,[y("div",hn,[u.value?(L(),z("img",{key:0,src:u.value,alt:"QR Code généré",class:"qr-image"},null,8,mn)):j("",!0)]),y("div",pn,[y("div",yn,[l[23]||(l[23]=y("strong",null,"Produit :",-1)),_(" "+S(d.nomProduit),1)]),y("div",wn,[l[24]||(l[24]=y("strong",null,"Franchise :",-1)),_(" "+S(d.franchise),1)]),y("div",Cn,[l[25]||(l[25]=y("strong",null,"Prix :",-1)),_(" "+S(d.prixVente)+" FCFA ",1)]),y("div",En,[l[26]||(l[26]=y("strong",null,"Poids :",-1)),_(" "+S(d.poids)+" "+S(d.unitePoids),1)]),y("div",bn,[l[27]||(l[27]=y("strong",null,"Créé par :",-1)),_(" "+S(d.auteur),1)])]),y("div",vn,[y("button",{class:"btn btn--secondary",onClick:N},[W(I,{icon:"fa-download",class:"btn-icon"}),l[28]||(l[28]=_(" Télécharger PNG ",-1))]),y("button",{class:"btn btn--primary",onClick:B,disabled:s.value},[s.value?j("",!0):(L(),oe(I,{key:0,icon:"fa-check",class:"btn-icon"})),s.value?(L(),z("div",Bn)):j("",!0),_(" "+S(s.value?"Sauvegarde...":"Sauvegarder"),1)],8,Pn)])])])])):j("",!0)]))])}}},An=yt(Tn,[["__scopeId","data-v-4892c7b4"]]);export{An as default};
